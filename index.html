
<!doctype html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุณุณุชู ุงูุจุงุฑุฏุงุฑ ุชุญุช ูุจ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

   
</head>
<body>

<div class="page-wrapper">
    <!-- Header -->
    <div class="card">
        <div class="card-header">
            <div>
                <h1>ุณุณุชู ุงูุจุงุฑุฏุงุฑ ุชุญุช ูุจ</h1>
                <p class="subtitle">
                    ุซุจุชุ ูุฏุฑุช ู ููุงุด ููุฌูุฏ ฺฉุงูุงูุง ุชููุง ุฏุฑ ูุฑูุฑฺฏุฑุ ุจุฏูู ูุงุฒ ุจู ูุตุจ ูุฑูโุงูุฒุงุฑ
                </p>
            </div>
            <span class="badge">ูุณุฎู ููุงุด ุจุฑุง ุงุฑุงุฆู</span>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">ุชุนุฏุงุฏ ุงููุงู ุซุจุชโุดุฏู</div>
                <div class="stat-value" id="stat-items">ฐ</div>
                <div class="stat-extra">ฺฉู ุฑุฏูโูุง ุงูุจุงุฑ</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ูุฌููุน ููุฌูุฏ</div>
                <div class="stat-value" id="stat-quantity">ฐ</div>
                <div class="stat-extra">ุฌูุน ุชุนุฏุงุฏ ุชูุงู ฺฉุงูุงูุง</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ุชุนุฏุงุฏ ูููุนุชโูุง</div>
                <div class="stat-value" id="stat-locations">ฐ</div>
                <div class="stat-extra">ุชุนุฏุงุฏ ูุญูโูุง ูฺฏูุฏุงุฑ ฺฉุชุง</div>
            </div>
        </div>
    </div>

    <!-- Form -->
    <div class="card">
        <div class="card-header">
            <h2 style="margin:0; font-size:18px; color:var(--primary-dark);">ุงูุฒูุฏู ฺฉุงูุง ุฌุฏุฏ ุจู ุงูุจุงุฑ</h2>
        </div>

        <form id="inventory-form">
            <div class="form-group">
                <label for="name">ูุงู ฺฉุงูุง *</label>
                <input type="text" id="name" required placeholder="ูุซุงู: ูพฺ M8ุ ฺฉุงุจู ุดุจฺฉูุ ูุงูุชูุฑ...">
            </div>

            <div class="form-group">
                <label for="code">ฺฉุฏ ฺฉุงูุง / SKU *</label>
                <input type="text" id="code" required placeholder="ูุซุงู: IT-001ุ WH-202ุ SKU-8899">
            </div>

            <div class="form-group">
                <label for="quantity">ุชุนุฏุงุฏ *</label>
                <input type="number" id="quantity" min="0" required placeholder="ูุซุงู: 10">
            </div>

            <div class="form-group">
                <label for="location">ูุญู ูฺฏูุฏุงุฑ</label>
                <input type="text" id="location" placeholder="ูุซุงู: ููุณู A3ุ ุงูุจุงุฑ ูพุงู">
            </div>

            <div class="form-group">
                <label for="category">ุฏุณุชูโุจูุฏ</label>
                <select id="category">
                    <option value="">(ุงูุชุฎุงุจ ูุดุฏู)</option>
                    <option value="ูุตุฑู">ูุตุฑู</option>
                    <option value="ุชุฌูุฒุงุช">ุชุฌูุฒุงุช</option>
                    <option value="ููุงุฒู ุฏฺฉ">ููุงุฒู ุฏฺฉ</option>
                    <option value="ุณุงุฑ">ุณุงุฑ</option>
                </select>
            </div>

            <div class="form-group">
                <label for="description">ุชูุถุญุงุช</label>
                <textarea id="description" placeholder="ุชูุถุญุงุช ุงุถุงู ูุซู ูุถุนุชุ ุจุฑูุฏุ ุณุฑุงู ู ..."></textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    ุงูุฒูุฏู ุจู ุงูุจุงุฑ
                </button>

                <div style="display:flex; align-items:center; gap:8px; flex-wrap:wrap;">
                    <button type="button" id="clear-all" class="btn btn-outline btn-sm">
                        ุญุฐู ูููู ุงุทูุงุนุงุช
                    </button>
                    <span class="hint">
                        ุฏุงุฏูโูุง ููุท ุฏุฑ ูุฑูุฑฺฏุฑ ุงู ุณุณุชู ุฐุฎุฑู ูโุดููุฏ (LocalStorage).
                    </span>
                </div>
            </div>
        </form>
    </div>

    <!-- Table -->
    <div class="card">
        <div class="card-header">
            <h2 style="margin:0; font-size:18px; color:var(--primary-dark);">ูุณุช ฺฉุงูุงูุง ุซุจุชโุดุฏู</h2>
        </div>

        <div class="table-toolbar">
            <div class="search-box">
                <input id="search-input" type="text" placeholder="ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ูุงูุ ฺฉุฏ ุง ูุญู...">
                <span class="search-icon">๐</span>
            </div>
            <span class="hint">ุจุง ุฌุณุชุฌูุ ุฌุฏูู ุจูโุตูุฑุช ูุญุธูโุง ููุชุฑ ูโุดูุฏ.</span>
        </div>

        <div class="table-container">
            <table>
                <thead>
                <tr>
                    <th>#</th>
                    <th>ูุงู ฺฉุงูุง</th>
                    <th>ฺฉุฏ</th>
                    <th>ุชุนุฏุงุฏ</th>
                    <th>ูุญู</th>
                    <th>ุฏุณุชู</th>
                    <th>ุชูุถุญุงุช</th>
                    <th>ุนููุงุช</th>
                </tr>
                </thead>
                <tbody id="inventory-table-body">
                <!-- ูพุฑ ูโุดูุฏ ุจุง ุฌุงูุงุงุณฺฉุฑูพุช -->
                </tbody>
            </table>
            <div id="empty-state" class="empty-state">
                ูููุฒ ฺฉุงูุง ุซุจุช ูุดุฏู ุงุณุช. ุงุฒ ูุฑู ุจุงูุง ุจุฑุง ุงูุฒูุฏู ุงููู ุฑุฏู ุงุณุชูุงุฏู ฺฉูุฏ.
            </div>
        </div>
    </div>
</div>

<script>
    const STORAGE_KEY = 'inventoryData_v2';

    const form = document.getElementById('inventory-form');
    const tableBody = document.getElementById('inventory-table-body');
    const clearBtn = document.getElementById('clear-all');
    const searchInput = document.getElementById('search-input');
    const emptyState = document.getElementById('empty-state');

    const statItems = document.getElementById('stat-items');
    const statQuantity = document.getElementById('stat-quantity');
    const statLocations = document.getElementById('stat-locations');

    function loadInventory() {
        const data = localStorage.getItem(STORAGE_KEY);
        return data ? JSON.parse(data) : [];
    }

    function saveInventory(items) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
    }

    function formatNumber(num) {
        return Number(num).toLocaleString('fa-IR');
    }

    function renderStats(items) {
        const itemCount = items.length;
        const totalQty = items.reduce((sum, item) => {
            const q = parseFloat(item.quantity || 0);
            return sum  (isNaN(q) ? 0 : q);
        }, 0);

        const locations = new Set(
            items
                .map(i => (i.location || '').trim())
                .filter(Boolean)
        );

        statItems.textContent = formatNumber(itemCount);
        statQuantity.textContent = formatNumber(totalQty);
        statLocations.textContent = formatNumber(locations.size);
    }

    function renderTable(filterText = '') {
        const items = loadInventory();
        const normalizedFilter = filterText.trim().toLowerCase();
        tableBody.innerHTML = '';

        const filtered = items.filter(item => {
            if (!normalizedFilter) return true;

            const haystack = [
                item.name,
                item.code,
                item.location,
                item.category,
                item.description
            ]
                .filter(Boolean)
                .join(' ')
                .toLowerCase();

            return haystack.includes(normalizedFilter);
        });

        if (filtered.length === 0) {
            emptyState.style.display = 'block';
        } else {
            emptyState.style.display = 'none';
        }

        filtered.forEach((item, index) => {
            const tr = document.createElement('tr');

            const tdIndex = document.createElement('td');
            tdIndex.textContent = index  1;

            const tdName = document.createElement('td');
            tdName.textContent = item.name;

            const tdCode = document.createElement('td');
            tdCode.textContent = item.code;

            const tdQty = document.createElement('td');
            tdQty.textContent = item.quantity;

            const tdLocation = document.createElement('td');
            tdLocation.textContent = item.location || 'โ';

            const tdCategory = document.createElement('td');
            if (item.category) {
                const span = document.createElement('span');
                span.className = 'tag';
                span.textContent = item.category;
                tdCategory.appendChild(span);
            } else {
                tdCategory.textContent = 'โ';
            }

            const tdDesc = document.createElement('td');
            tdDesc.textContent = item.description || 'โ';

            const tdActions = document.createElement('td');
            const delBtn = document.createElement('button');
            delBtn.className = 'btn btn-danger btn-sm';
            delBtn.textContent = 'ุญุฐู';
            delBtn.setAttribute('data-id', item.id);
            tdActions.appendChild(delBtn);

            tr.appendChild(tdIndex);
            tr.appendChild(tdName);
            tr.appendChild(tdCode);
            tr.appendChild(tdQty);
            tr.appendChild(tdLocation);
            tr.appendChild(tdCategory);
            tr.appendChild(tdDesc);
            tr.appendChild(tdActions);

            tableBody.appendChild(tr);
        });

        renderStats(items);
    }

    function generateId() {
        return 'item_'  Date.now()  '_'  Math.random().toString(16).slice(2);
    }

    form.addEventListener('submit', function (e) {
        e.preventDefault();

        const name = document.getElementById('name').value.trim();
        const code = document.getElementById('code').value.trim();
        const quantity = document.getElementById('quantity').value;
        const location = document.getElementById('location').value.trim();
        const category = document.getElementById('category').value;
        const description = document.getElementById('description').value.trim();

        if (!name || !code) {
            alert('ูุงู ฺฉุงูุง ู ฺฉุฏ ฺฉุงูุง ุงูุฒุงู ุงุณุช.');
            return;
        }

        const items = loadInventory();
        items.push({
            id: generateId(),
            name,
            code,
            quantity: quantity || '0',
            location,
            category,
            description
        });

        saveInventory(items);
        renderTable(searchInput.value);
        form.reset();
        document.getElementById('name').focus();
    });

    clearBtn.addEventListener('click', function () {
        if (confirm('ูููู ุงุทูุงุนุงุช ุงูุจุงุฑ ุจุฑุง ุงู ูุฑูุฑฺฏุฑ ุญุฐู ุดูุฏุ')) {
            localStorage.removeItem(STORAGE_KEY);
            renderTable(searchInput.value);
        }
    });

    searchInput.addEventListener('input', function () {
        renderTable(this.value);
    });

    tableBody.addEventListener('click', function (e) {
        if (e.target.matches('button[data-id]')) {
            const id = e.target.getAttribute('data-id');
            let items = loadInventory();
            items = items.filter(item => item.id !== id);
            saveInventory(items);
            renderTable(searchInput.value);
        }
    });

    // initial
    renderTable();
</script>

</body>
</html>
